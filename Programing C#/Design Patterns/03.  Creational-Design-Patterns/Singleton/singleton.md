# Singleton Pattern

## Мотивация

 * Служи за  създаване на точно една инстанцияна даден обект,когато това наистина е важно и нужно за приложението
 * Гаратира че не може по никакъв начин да се създаде друга инстанция на обекта
 * Всички останали обекти имат достъп до инстацията когато им е нужна.
 * Създава се със стартирането на приложението или по късно когато наистина ни трябва.
 * Живее до края с приложението и гарантира че по всяко време когато някой друг обект има нужда от него, той ще може да се свърже.
 

## Цел

 * Приложението се нуждае от една единствена инстанция на обекта. Допълнително са необходими lazy initialization и една да се достъпва от едно единствено място

## Приложение

* Нека изясня всико казано с един пример:
 
 	
    
## Известни употреби
* 

## Имплментация 
 Класът е написан така че да може да се създаде единствена инстанция - обикновено се имплементира със статитечен конструктор, lazy initialization и когато е необходимо thread safe
 
```
public class Logger : ILogger
    {
        private static Logger instance;

        private static Object lockedObject = new Object();

        private Logger()
        {
        }

        public static Logger Instance
        {
            get
            {
                if (Instance == null)
                {
                    lock (lockedObject)
                    {
                        if (instance == null)
                        {
                            instance = new Logger(); 
                        }
                    }
                }

                return instance;
            }
        }
        public void Log(string log, IPrinter printer)
        {
            printer.Print ($"{DateTime.Now}  {log}");
        }
    }
}
  ```

## Последствия
* Контролира достъпа до една единствена инстанция, ъй като класът Singleton капсулира свое например, тя може да има строг контрол върху това как и когато клиентите имат достъп до него.
* Моделът Singleton е подобрение спрямо глобалните променливи. Избягва се замърсяване на namespace с глобални променливи, които съхраняват единични инстанции.
* Класът на Singleton може да бъде наследяван, и е лесно да се конфигурира инстанция на разширения клас по време на изпълнение на приложението.


## Проблеми
* Чупи SRP - single responsible princip, защото има 2 несвързани отговарности
 1. Да се създаде сам
 1. Да си върши работата за която е зъздаден
* Живее през цялото време на приложението в RAM паметта
* Много силен каплинг - нетестваем, не може да се моква.

## UML  диаграма

![alt text](http://www.apwebco.com/images/singleton.jpg")
